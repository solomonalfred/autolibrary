# Autolibrary

### Телеграм-бот для поиска книг, по тематике, авторам и названию.

# Команды

Всё реализованно через кнопки, чтобы не допустить ошибку при поиске книги.

## Команды главного меню:

- 'Посмотреть карточку читателя' - просмотреть прочитанные книги по разделам
- 'Найти книгу' - начать поиск

## Поиск книги:

Показыавется надпись "Выберите тематику:" и выводятся кнопки с названиеми имеющихся разделов

- <Название раздела> - определить жанр книги

После выбора тематики книги предлагается способ поиска книги (выводятся кнопки):

- 'Искать по автору' - искать книги по конкретному автору в данном разделе
- 'Искать по названию' - искать книги по конкретному названию в вырбанном разделе

a) Если выбрали поиск по автору, то выводятся кнопки с именами авторов в данном разделе:

- <фИО автора(ов)> - выбрать автора книги

a) После выбора автора, показывают книги под его авторством в данном разделе (также ввиде кнопок):

- <Название книги> - выбрать книгу для чтения

б) Если выбрали искать по названию, то выводяться все названия книг (в виде кнопок):

- <Название книги> - выбрать книгу для чтения

После выбора книги выводится контактная информация о книге, такая как название, автор и ресурс с которого её можно скачать

## Стэк технологий:

Бот написан на языке Python при помощи библиотеки `pyTelegramBotAPI` и сопровождён тестами, использующими библиотеку `unittest`.

Хранение и изменение информации о существующих викторинах осуществляется в No-SQL-базе данных MongoDB. Взаимодействие кода с базой обеспечено библиотекой `pymongo`.

При помощи интерфейса `mongo-express` состояние базы можно проверить в браузере.

## Развёртывание:

Чтобы развернуть бота локально, достаточно:
- Установить Docker
- Прописать в консоли "make up" и всё запуститься (все дополнительные настройки можно изменить в .env файле)

```yaml
version: "3"

services:

  bot:
    build:
      context: .
      dockerfile: Dockerfile
    image: auto_library_bot
    environment:
      - MONGO_URL=${URL}
    depends_on:
      - mongodb
    restart: on-failure

  mongodb:
    image: mongo:latest
    container_name: mongodb
    ports:
      - "27018:27017"
    volumes:
      - mongo-data:/data/db

  mongo-express:
    image: mongo-express:latest
    container_name: mongo-express
    depends_on:
      - mongodb
    environment:
      - ME_CONFIG_MONGODB_SERVER=mongodb
    ports:
      - "8082:8081"

volumes:
  mongo-data:
```

- в консоли
  - для запуска:
```shell
make up
```
  -для остановки:

```shell
make down
```

  - для получения логгов бота:

```shell
make bot_info
```

  - для очиски хэшей и сноса образов docker:
```shell
make clean
```
## Авторы
5130904/10102
- Богданов Никита
- Али Шериф Ашраф Собхи Яссин
5130904/10103
- Неверов Захар